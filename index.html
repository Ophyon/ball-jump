<html>

<head>
    <title>Ball Jump</title>
    <script src="https://ivory.netlify.com/dist/ivory.js"></script>
</head>
<style>
    body {

        background: black;
        font-size: 300%;

    }

    h1 {


        color: white;
        font-family: 'Luckiest Guy', cursive;
        border-style: dotted;
        border-width: 3px;
        border-color: grey;
        max-width: 694px;

    }

    button {

        color: grey;
        font-family: 'Luckiest Guy', cursive;
        font-size: 100%;

    }

    h4 {

        color: white;
        font-family: 'Luckiest Guy', cursive;
    }

    h6 {

        color: white;
        font-family: 'Luckiest Guy', cursive;

    }

    h5 {

        color: white;
        font-family: 'Luckiest Guy', cursive;

    }

    h2 {

        color: red;
        font-family: 'Luckiest Guy', cursive;

    }

    a {

        font-family: 'Luckiest Guy', cursive;

    }
</style>

<body>
    <canvas id="canvas"></canvas>

    <script type="text/javascript">

        window.requestAnimFrame =
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function (callback) {
                return window.setTimeout(callback, 1000 / 60);
            };

        var canvas = document.getElementById('canvas'),
            ctx = canvas.getContext('2d');

        canvas.width = 500;
        canvas.height = 400;


        var map = {

            tile_size: 16,
            keys: [
                { id: 0, colour: '#333', solid: 0 },
                { id: 1, colour: '#6e6e6e', solid: 0 },
                { id: 2, colour: '#000000', solid: 1, bounce: 0.35 },
                { id: 3, colour: 'rgba(121, 220, 242, 0.3)', friction: { x: 0.9, y: 0.9 }, gravity: { x: 0, y: 0.1 }, jump: 1, fore: 1 },
                { id: 3, colour: '#777', jump: 1 },
                { id: 3, colour: '#E373FA', solid: 1, bounce: 1.1 },
                { id: 6, colour: '#666', solid: 1, bounce: 0 },
                { id: 7, colour: '#73C6FA', solid: 0, script: 'change_colour' },
                { id: 8, colour: '#FADF73', solid: 0, script: 'next_level' },
                { id: 9, colour: '#C93232', solid: 0, script: 'death' },
                { id: 10, colour: '#555', solid: 1 },
                { id: 11, colour: '#0FF', solid: 0, script: 'unlock' }
            ],
            data: [
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 8, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9, 9, 9, 2, 9, 2, 9, 9, 9, 9, 9, 9, 9, 9, 9, 2, 2, 2, 3, 3, 3, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9],
                [9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 2, 2, 2, 2, 2, 2, 2, 2, 9, 9, 9, 9, 9, 9, 2, 2, 2, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 9],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
            ],


            gravity: {
                x: 0,
                y: 0.3
            },


            vel_limit: {
                x: 2,
                y: 16
            },


            movement_speed: {
                jump: 6,
                left: 0.3,
                right: 0.3
            },


            player: {
                x: 2,
                y: 2,
                colour: '#000000'
            },


            scripts: {
                change_colour: 'this.player.colour = "#"+(Math.random()*0xFFFFFF<<0).toString(16);',
                /* you could load a new map variable here */
                next_level: 'this.load_map(map2);',
                death: 'this.load_map(map);',
                unlock: 'this.current_map.keys[10].solid = 0;this.current_map.keys[10].colour = "#888";'
            }
        };
        var map2 = {

            tile_size: 16,
            keys: [
                { id: 0, colour: '#333', solid: 0 },
                { id: 1, colour: '#6e6e6e', solid: 0 },
                { id: 2, colour: '#000000', solid: 1, bounce: 0.35 },
                { id: 3, colour: 'rgba(121, 220, 242, 0.3)', friction: { x: 0.9, y: 0.9 }, gravity: { x: 0, y: 0.1 }, jump: 1, fore: 1 },
                { id: 3, colour: '#777', jump: 1 },
                { id: 3, colour: '#E373FA', solid: 1, bounce: 1.1 },
                { id: 6, colour: '#666', solid: 1, bounce: 0 },
                { id: 7, colour: '#73C6FA', solid: 0, script: 'change_colour' },
                { id: 8, colour: '#FADF73', solid: 0, script: 'next_level' },
                { id: 9, colour: '#C93232', solid: 0, script: 'death' },
                { id: 10, colour: '#555', solid: 1 },
                { id: 11, colour: '#0FF', solid: 0, script: 'unlock' }
            ],
            data: [
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 2, 2, 2, 2, 11, 11, 11, 11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 2, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 10, 10, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 10, 8, 2],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]


            ],


            gravity: {
                x: 0,
                y: 0.3
            },


            vel_limit: {
                x: 2,
                y: 16
            },


            movement_speed: {
                jump: 6,
                left: 0.3,
                right: 0.3
            },


            player: {
                x: 2,
                y: 2,
                colour: '#000000'
            },


            scripts: {
                change_colour: 'this.player.colour = "#"+(Math.random()*0xFFFFFF<<0).toString(16);',
                /* you could load a new map variable here */
                next_level: 'this.load_map(map3);',
                death: 'this.load_map(map);',
                unlock: 'this.current_map.keys[10].solid = 0;this.current_map.keys[10].colour = "#888";',
                lock: 'this.current_map.keys[10].solid = 1;this.current_map.keys[10].colour = "#888";'
            }
        };
        var map3 = {

            tile_size: 16,
            keys: [
                { id: 0, colour: '#333', solid: 0 },
                { id: 1, colour: '#6e6e6e', solid: 0 },
                { id: 2, colour: '#000000', solid: 1, bounce: 0.35 },
                { id: 3, colour: 'rgba(121, 220, 242, 0.3)', friction: { x: 0.9, y: 0.9 }, gravity: { x: 0, y: 0.1 }, jump: 1, fore: 1 },
                { id: 3, colour: '#777', jump: 1 },
                { id: 3, colour: '#216021', solid: 0},
                { id: 6, colour: '#666', solid: 1, bounce: 0 },
                { id: 7, colour: '#73C6FA', solid: 0, script: 'change_colour' },
                { id: 8, colour: '#FADF73', solid: 0, script: 'next_level' },
                { id: 9, colour: '#C93232', solid: 0, script: 'death' },
                { id: 10, colour: 'rgba(121, 220, 242, 0.3)', solid: 1 },
                { id: 11, colour: 'rgba(121, 220, 242, 0.3)', solid: 0, script: 'unlock' },
                { id: 12, colour: '#00b300', solid: 0, script: 'death' },
                { id: 13, colour: '#019101', solid: 0, script: 'death' },
                { id: 15, colour: 'rgba(121, 220, 242, 0.3)', solid: 0, script: 'death' },
                { id: 14, colour: '#01917b', solid: 0},
                { id: 16, colour: 'rgba(121, 220, 242, 0.3)', solid: 0, script: 'lock'}
            ],
            data: [
                [12, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 14, 14, 14, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 14, 14, 14, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 14, 14, 14, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 13, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 13, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 12, 12, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 13, 3, 3, 3, 3, 3, 12, 13, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 13, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 13, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 13, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 12, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 12, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 13, 13, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 13, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 12, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 3, 12, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 12, 12, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 13, 13, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 12, 13, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 12, 12, 3, 3, 3, 3, 12, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 13, 12, 3, 3, 3, 3, 13, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 12, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 13, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 12, 13, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 13, 13, 3, 3, 3, 3, 3, 12, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 13, 3, 3, 3, 3, 3, 3, 3, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 13, 13, 12, 3, 3, 3, 3, 3, 3, 3, 3, 12, 9, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 12, 13, 3, 3, 3, 3, 3, 13, 12, 13, 3, 3, 3, 3, 3, 3, 3, 3, 13, 9, 12, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 8, 2],
                [2, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2] 
            ],


            gravity: {
                x: 0,
                y: 0.2
            },


            vel_limit: {
                x: 2,
                y: 16
            },


            movement_speed: {
                jump: 6,
                left: 0.2,
                right: 0.2
            },


            player: {
                x: 2,
                y: 2,
                colour: '#000000'
            },


            scripts: {
                change_colour: 'this.player.colour = "#"+(Math.random()*0xFFFFFF<<0).toString(16);',
                /* you could load a new map variable here */
                next_level: 'this.load_map(map);',
                death: 'this.load_map(map);',
                unlock: 'this.current_map.keys[10].solid = 0;this.current_map.keys[10].colour = "rgba(121, 220, 242, 0.3)";'
            }
        };

        /* Setup of the engine */

        var game = new Clarity();
        game.set_viewport(canvas.width, canvas.height);
        game.load_map(map);

        /* Limit the viewport to the confines of the map */

        game.limit_viewport = true;

        var Loop = function () {

            ctx.fillStyle = '#333';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            game.update();
            game.draw(ctx);

            window.requestAnimFrame(Loop);
        };

        /* Start */

        Loop();
    </script>
    <h6>Reload for restart</h6>
</body>



</html>